# 会员体系现状分析与调整方向建议

## 一、当前会员体系概览

### 用户可见的会员与功能

| 会员类型 | 能干什么 |
|--------|---------|
| 国内会员 | 同传翻译 / 智能助手 / 会议助理 |
| 国际会员 | 同传翻译 / 智能助手 / 会议助理 |
| 音视频翻译 | 需要单独购买 |
| 离线翻译 | 需要单独购买 |

从用户视角看，**国内会员与国际会员的功能完全一致**，但国际会员价格更高，产品面未能清晰呈现其“溢价”在何处。用户无法直观理解国际版的核心优势。
且 **同一个用户可以同时购买国内会员和国际会员**，提供切换开关，提高了操作难度。


### 用户层面的主要弊端
#### 1. 心智负担极重

用户会产生以下真实困惑：

- 我应该买哪个会员？
- 我现在到底在用哪一个？
- 当前生效的是国内会员，还是国际会员？
- 购买了国内会员，想升级为国际会员，那国内会员怎么办？

一旦存在「会员切换开关」，用户几乎必然会：

- 忘了切换
- 切换错误
- 不清楚当前使用状态

这些操作负担，最终都会转化为 **体验不一致 + 客服问题**。

#### 2. 功能越多，收费项必然爆炸

如果继续沿用当前设计，随着功能增加，收费项会不断膨胀：

- 国际会员 = 一个收费项？
- 国内会员 = 再一个？
- 音视频翻译 = 再一个？
- 未来更多 AI 能力 = 更多？

用户的真实感受会是：**“这是一个会员套娃地狱。”**

#### 3. 设计本质问题

目前有国际会员，国内会员，离线翻译，音视频通话翻译四个收费方式。且允许用户同时购买国内会员和国际会员，并通过设置手动切换。 
本质上是把「**内部成本差异**」转嫁成「**用户需要理解和操作的复杂度**」。
从短期来看，这种做法似乎更灵活，但从长期演进的角度看，它会持续侵蚀用户体验，使商业结构变得模糊不清，同时显著限制系统在功能扩展、规则演进和规模增长上的可持续性。


### 功能背后的真实“场景能力”

#### 用户看到的功能 vs 实际技术组合

| 用户看到的 | 技术上涉及 |
|-----------|------------|
| 同传翻译 | ASR + MT + TTS |
| AI 助手 | ASR + LLM + TTS |
| 会议助理 | ASR + LLM |
| 音视频翻译 | RTC + ASR + MT + TTS |
  
当前会员设计是 **按技术组合收费，而不是按用户场景收费**。


### 核心问题

**如何在不让用户感知复杂度的前提下，合理控制不同底层技术带来的成本差异？**


## 二、行业参考案例

### 1. WPS

- 早期：  
  - 文字会员 / 表格会员 / 演示会员
  - 用户极度困惑，口碑崩坏
- 后期：  
  - 统一为「WPS 超级会员」
  - 分 超级会员 / 大会员（含超级会员全部）
  - 大会员享有更多 全文翻译  WPS AI

**统一身份 + 内部资源分配**


### 2. 爱奇艺 / 腾讯视频

用户买的是：

- 黄金VIP / 白金VIP / 星钻VIP

用户不会被要求理解：

- CDN 厂商
- 编码格式
- 带宽成本

成本控制发生在：

- 清晰度等级
- 是否限速
- 权益差异


优秀的互联网产品从不让用户理解技术成本，而是通过分层设计，在后台完成成本控制。这些产品的会员体系，几乎都遵循同一套三层结构。

| 层级 | 名称 | 核心逻辑 | 示例 | 用户是否感知 |
| --- | --- | --- | --- | --- |
| 🟢 第 1 层 | 用户心智层 | 只卖「身份」 | 京东 PLUS、爱奇艺 VIP、ChatGPT Plus | 强感知 |
| 🟡 第 2 层 | 能力 / 权益层 | 按「使用场景」授权 | 能否看 4K、能否免运费、能否跳广告 | 中感知 |
| 🔴 第 3 层 | 资源 / 成本层 | 隐形配额 & 成本控制 | CDN 节点选择、带宽限速、模型参数大小 | 几乎无感知 |

## 三、会员体系调整方向：会员等级 + 统一消耗货币

### 1. 会员等级制（决定“权限与质量”）

❌ 不再区分：国内会员 / 国际会员
✅ 改为：**单一会员体系 + 使用策略差异**

核心逻辑：权益层与消耗层分离
- 会员身份：决定你能用什么功能、用什么精度的引擎、买资源打几折。

- 翻译币（能量点）：作为底层资源的统一度量衡，覆盖 ASR/MT/LLM/RTC 的所有支出。

#### 示例

|维度|基础会员 (Lite)|专业会员 (Pro)|能量点加油包
|----|----|----|----|
用户心智|“我能用，但额度适中”|“重度用户，无忧使用”|“临时突发需求补充”
功能权限|解锁全部功能|解锁全部功能|N/A
底层引擎|讯飞 / 自建 / 入门级|可选微软 / 高级 LLM / 离线版|随会员等级自动切换
赠送额度|每月 500 点|每月 5000 点|随买随用
额外特权|无|购买加油包享 8 折|无

去掉国际会员和国内会员切换功能。如用户同时购买/兑换了多种不同身份的VIP 会员套餐，会依次消耗专业会员、高级会员、基础会员的有效期天数，享受对应的权益。在用户购买专业会员会员后，若账号内仍有剩余未过期的基础会员/高级会员，将会先立即生效专业会员权益，剩余的基础会员/高级会员到期时间将顺延，待专业会员过期时继续依次生效。

### 2. 统一消耗货币：能量点 / 翻译币（Universal Credits）

将不同技术成本统一映射为「点数」，作为内部成本控制核心。

#### 示例规则（仅示意）

- 同传翻译（低成本路径）：  
  `1 分钟 = 10 点`
- 同传翻译（高精度模型）：  
  `1 分钟 = 50 点`
- 音视频翻译（含 RTC）：  
  `1 分钟 = 100 点`
- AI 助手（LLM）：  
  `一次对话 = 5 点`


## 三、当前会员系统分析总结

该会员体系在早期阶段契合业务发展节奏，但在功能与成本模型不断叠加后，已经开始削弱用户对产品价值的直观理解，并限制商业模式的持续扩展。行业的成熟实践表明，应将**会员作为用户侧的“身份表达”**，而将**资源消耗与成本控制收敛到内部**统一模型中。

## 当前会员系统
![会员体系ER图](./docs/member-tables.png)

### 现有系统的主要问题

当前会员体系在业务演进过程中逐步暴露出一些结构性问题，主要体现在以下几个方面：

- **授权码职责过载**
  AuthorizationCode 同时承担了身份认证、会员权益绑定、设备管理以及订单关联等多重职责，导致模型臃肿、边界不清。
- **会员数据分散且复杂**
  会员权益被拆散在多个业务表中维护，目前既有基础会员 / 国际会员，又有音视频通话时长等独立计量模型，整体缺乏统一抽象。
- **扩展性明显受限**
  每一种新功能都采用独立计量和授权逻辑，导致新增能力时必须同步引入新的授权与校验路径，系统复杂度线性上升。
- **订单体系不统一**
  AuthorizationCodeBatches 在历史上承担了部分订单职责，与后续引入的 MerchantOrders 职责重叠；而 C 端用户充值则完全走 TransactionOrder，订单语义割裂。


### 目标设计方向

目标是将会员体系升级为一个**统一的等级模型**，以“能量点”作为所有能力的通用消耗单位：

- 所有功能能力对会员**统一开放**
- 会员等级差异仅体现在：
  - 底层模型质量
  - 可用配额规模
  - 能量点消耗速率策略

高等级会员将享受更优质的模型能力、更大的配额以及更低的单位消耗成本。当用户能量不足时，可直接购买**加油包 / 流量包**进行补充，无需再引入新的会员类型。

整体目标是将现有会员体系，从**以授权码为核心的准入模型** 升级为**以用户为中心、以能力与消耗为驱动的会员体系**。

### 关键概念定义

| 概念 | 新定义 | 核心职责 | 与现有系统的区别 |
|---|---|---|---|
| **用户（User）** | 真实使用产品的人 | 持有会员身份，进行实际消费 | 从「授权码使用者」转变为「权益的最终所有者」 |
| **会员（Membership）** | 能力 + 权益 + 有效期的组合 | 决定服务质量等级与能量点消耗效率 | 从「功能权限包」升级为「服务质量等级模型」 |
| **授权码（AuthorizationCode）** | 允许设备接入系统的凭证 | 设备身份验证、轻量化接入 | 从「权益载体」回归为「访问钥匙」 |


> 核心思想：**对用户出售的是“身份与体验等级”，对系统内部管理的是“资源与消耗”。**

## 新会员系统
![会员系统ER图](./docs/member-new.png)

```
type VipPackage struct {
	ID        uint      // VIP套餐ID
	Name      string    // VIP名称
	Level     string    // VIP等级
	CreatedAt time.Time // 创建时间
	UpdatedAt time.Time // 更新时间
}

type VipEntitlementPlan struct {
	ID            uint                  // 权益ID
	VipLevel      string                // VIP等级
	Description   string                // 权益描述
	Rules         json                  // 权益规则
	Status        constant.VipStatus    // 状态
	effectiveTime uint                  // 生效时长
	effectiveUnit constant.DurationUnit // 生效时长单位
	CreatedAt     time.Time             // 创建时间
	UpdatedAt     time.Time             // 更新时间
}

type UserVip struct {
	Code              string             // 授权码
	UserID            uint               // 用户ID
	VipLevel          string             // VIP等级
	EntitlementPlanID uint               // 权益计划ID
	ExpiredAt         time.Time          // 到期时间
	CreatedAt         time.Time          // 创建时间
	UpdatedAt         time.Time          // 更新时间
	Status            constant.VipStatus // 状态
}
```
VipPackage 的 **Level** 与 VipEntitlementPlan 的 **VipLevel** 之间是**一对多关系**：同一会员等级在不同业务阶段，可能对应多套不同的权益方案。当会员权益发生调整时，系统通过**新增一条 VipEntitlementPlan 记录**来承载新的权益定义，而不是直接修改既有方案，从而保证历史数据的稳定性与可追溯性。

在权益升级场景下（同一等级内新增或增强权益），已存在的老会员可以选择**自动切换至最新的权益方案**，也可以在**订阅、续费或升级等生命周期节点**同步更新到新的方案；而在权益缩减的情况下，为保障存量用户体验，老会员将**继续沿用原有的权益方案**，新的权益方案仅对**后续新订购或升级的会员**生效。

```
type UserEnergyAccount struct {
	UserID          uint      // 用户ID
	RemainingPoints int64     // 总量
	CreatedAt       time.Time // 创建时间
	UpdatedAt       time.Time // 更新时间
}

type UserEnergyBucket struct {
	ID              uint      // 能量桶ID
	UserID          uint      // 用户ID
	SourceType      string    // 能量桶类型  (赠送，订阅，加油包，商业补偿)
	TotalPoints     int64     // 总量
	RemainingPoints int64     // 剩余
	UsedPoints      int64     // 已使用
	ExpiredAt       time.Time // 到期时间
	CreatedAt       time.Time // 创建时间
	UpdatedAt       time.Time // 更新时间
}

```

**UserEnergyAccount（账户汇总表）**用于维护用户当前可用的能量点总量，本质上是 **UserEnergyBucket** 的余额快照。它主要承担余额展示、请求前的快速预判、风控兜底以及购买引导等职责，以此提升系统整体性能与并发处理能力，优化用户体验，并降低各业务系统之间的耦合度。该表并不直接参与具体的能量消耗规则计算，而是作为一个高频读取存在。

**UserEnergyBucket（能量桶明细表）**则记录能量点的真实来源与完整生命周期，是能量消耗与账务核算的唯一事实依据。每个能量桶明确包含能量来源类型、总量、已使用量、剩余量以及到期时间等信息。在实际消耗过程中，系统按照「**优先级 + 到期时间**」的策略进行扣减，优先消耗优先级更高且更早到期的能量桶，再逐步消耗到期时间更晚、优先级更低的能量桶，以确保能量使用过程的公平性与可控性。

当前能量点模型覆盖多种业务场景，不同来源的能量在到期策略上存在差异，例如 B 端激活赠送与月度会员赠送通常具备明确的有效期，C 端订阅能量同样受订阅周期约束；加油包类能量可根据业务需要选择是否设置过期时间，而商业补偿类能量则支持更灵活的自定义到期策略。这种统一但可配置的设计，使能量体系能够在不同业务模式下保持一致性与扩展性。

| 场景 | source_type | expired |
| --- | --- | --- |
|B 端激活赠送| gift| ✔ |
|月度会员赠送 |subscription |✔（月底） |
|C 端订阅| subscription| ✔ |
|加油包 |topup |可选 |
|商业补偿| promo| 自定义|

```
type UserEnergyFlow struct {
	ID                uint      // 能量点流水ID
	UserID            uint      // 用户ID
	FlowType          string    // 流水类型 (消费，赠送， 过期， 退款， 补偿， 充值)
	Points            int64     // 能量点数量
	PointsAfter       int64     // 操作后能量点数量
	BusinessID        string    // 业务ID
	BucketID          uint      // 能量桶ID
	SourceType        string    // 能量桶类型  (赠送，订阅，加油包，商业补偿)
	VipLevel          string    // 变动时的 VIP 等级 (如: Gold, Platinum)
	EntitlementPlanID uint      // 变动时的 权益计划 ID
	OperatorID        string    // 操作人
	CreatedAt         time.Time // 创建时间
	Remark            string    // 备注
}
```
UserEnergyFlow 用于记录用户能量点的每一次变动，完整描述能量点的变动类型、数量、发生时间及对应的业务原因，形成可追溯的能量流水。由于用户的 VIP 等级本身具有动态变化的特性，流水中会冗余记录当次变动时的 VIP 等级信息，以支持后续对不同会员等级用户的能量消耗行为进行分析，并统计各 VIP 等级在整体能量消耗中的分布情况

